



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>DSSG Hitchhickers guide</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#best-practices-writing-legible-good-code" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="DSSG Hitchhickers guide" class="md-header-nav__button md-logo">
          
            <i class="md-icon">bubble_chart</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              DSSG Hitchhickers guide
            </span>
            <span class="md-header-nav__topic">
              Best Practices: Writing Legible, Good Code
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/dssg/hitchhikers-guide/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dssg/hitchhikers-guide
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="DSSG Hitchhickers guide" class="md-nav__button md-logo">
      
        <i class="md-icon">bubble_chart</i>
      
    </a>
    DSSG Hitchhickers guide
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/dssg/hitchhikers-guide/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    dssg/hitchhikers-guide
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      DSSG Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        DSSG Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dssg-manual/conduct-culture-and-communications/" title="Code of conduct" class="md-nav__link">
      Code of conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dssg-manual/summer-overview/" title="Summer overview" class="md-nav__link">
      Summer overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Curriculum
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Curriculum
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../0_before_you_start/" title="Before you start" class="md-nav__link">
      Before you start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1_getting_and_keeping_data/" title="Getting and keeping data" class="md-nav__link">
      Getting and keeping data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2_data_exploration_and_analysis/" title="Data exploration and analysis" class="md-nav__link">
      Data exploration and analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3_modeling_and_machine_learning/" title="Modeling and ML" class="md-nav__link">
      Modeling and ML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Programming best practices" class="md-nav__link">
      Programming best practices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../5_presentations_and_communications/" title="Presentations and communications" class="md-nav__link">
      Presentations and communications
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#best-practices-writing-legible-good-code" title="Best Practices: Writing Legible, Good Code" class="md-nav__link">
    Best Practices: Writing Legible, Good Code
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#motivation" title="Motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-whom-do-we-write-code" title="For whom do we write code?" class="md-nav__link">
    For whom do we write code?
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-you-write-for-people" title="What you write (for people)." class="md-nav__link">
    What you write (for people).
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-the-computer-sees-assembly-language-for-the-processor" title="What the computer sees (assembly language for the processor)." class="md-nav__link">
    What the computer sees (assembly language for the processor).
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#seriously-the-code-is-for-you" title="Seriously, the code is for you..." class="md-nav__link">
    Seriously, the code is for you...
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#there-is-only-one-law-of-good-coding-code-is-for-humans-not-for-computers" title="There is only one law of good coding: Code is for humans, not for computers." class="md-nav__link">
    There is only one law of good coding: Code is for humans, not for computers.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#give-things-informative-names" title="Give Things Informative Names" class="md-nav__link">
    Give Things Informative Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-inputs-and-outputs" title="Document Inputs and Outputs" class="md-nav__link">
    Document Inputs and Outputs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dont-repeat-yourself" title="Don't Repeat Yourself" class="md-nav__link">
    Don't Repeat Yourself
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-wet-write-everything-twice-way" title="The WET (Write Everything Twice) Way" class="md-nav__link">
    The WET (Write Everything Twice) Way
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dry-way-use-a-function-to-avoid-redundancy" title="The DRY Way: Use a function to avoid redundancy" class="md-nav__link">
    The DRY Way: Use a function to avoid redundancy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dry-er-way" title="The DRY-er Way" class="md-nav__link">
    The DRY-er Way
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-wet-way-plotting" title="The WET Way: Plotting" class="md-nav__link">
    The WET Way: Plotting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-dry-way-plotting" title="The DRY Way: Plotting" class="md-nav__link">
    The DRY Way: Plotting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reduce-cognitive-load" title="Reduce Cognitive Load." class="md-nav__link">
    Reduce Cognitive Load.
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#follow-pep-8" title="Follow PEP-8" class="md-nav__link">
    Follow PEP-8
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-makes-this-one-better" title="What makes this one better?" class="md-nav__link">
    What makes this one better?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pep-8-is-your-friend" title="PEP-8 is your friend!" class="md-nav__link">
    PEP-8 is your friend!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#you-can-use-a-checker-to-pep-8-your-code" title="You can use a checker to PEP-8 your code." class="md-nav__link">
    You can use a checker to PEP-8 your code.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pip-install-autopep8-autopep8-in-place-mypythonfilepy" title="pip install autopep8" class="md-nav__link">
    pip install autopep8
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary-code-is-for-humans-not-computers" title="Summary: Code is for humans, not computers." class="md-nav__link">
    Summary: Code is for humans, not computers.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercises" title="Exercises" class="md-nav__link">
    Exercises
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fix-this-class" title="Fix this class!" class="md-nav__link">
    Fix this class!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-myclassobject-def-__init__self-r-i-selfr-r-selfi-i-def-multiplyself-other-return-myclassselfr-otherr-selfi-otheri-selfr-otheri-selfi-otherr" title="class myclass(object):" class="md-nav__link">
    class myclass(object):
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix-this-function" title="Fix this function!" class="md-nav__link">
    Fix this function!
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fix-this-function_1" title="Fix this function!" class="md-nav__link">
    Fix this function!
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dssg/hitchhikers-guide/edit/master/docs/curriculum/4_programming_best_practices/legible-good-code/README.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Best Practices: Writing Legible, Good Code</h1>
                
                <h2 id="best-practices-writing-legible-good-code">Best Practices: Writing Legible, Good Code<a class="headerlink" href="#best-practices-writing-legible-good-code" title="Permanent link">&para;</a></h2>
<h3 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h3>
<p>All fellows will have to write code that is usable and understandable by their peers and partners, and potentially 
other 3rd parties. What does that entail in practice? Many fellows are coming from academic backgrounds, 
have self-taught programming skills, and have never worked collaboratively on a software project. 
We want to help them establish good habits and avoid common mistakes.</p>
<p>(Adapted from Tutorial by Kevin Wilson, 2016 DSSG Technical Mentor)</p>
<hr />
<h2 id="for-whom-do-we-write-code">For whom do we write code?<a class="headerlink" href="#for-whom-do-we-write-code" title="Permanent link">&para;</a></h2>
<h3 id="what-you-write-for-people">What you write (for people).<a class="headerlink" href="#what-you-write-for-people" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param int n: The Fibonnaci index you want to return</span>
<span class="sd">    :return: The nth Fibonnaci number</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
Here is an example of a function. Why write this function? Well, literally, you give the function an integer <em>n</em>, and the function gives you back the <em>n</em>th Fibonnaci number. Writing code allows you to have the computer calculate the <em>n</em>th Fibonnaci number, which it can probably do much faster than you can, especially as <em>n</em> gets larger and larger. It also allows your human comrades to see for themselves how you rattle off arbitrary Fibonacci numbers so fast. But you don't really write code for the computer... </p>
<h3 id="what-the-computer-sees-assembly-language-for-the-processor">What the computer sees (assembly language for the processor).<a class="headerlink" href="#what-the-computer-sees-assembly-language-for-the-processor" title="Permanent link">&para;</a></h3>
<p>... because if you did, it would look like this.
<div class="highlight"><pre><span></span>  2           0 LOAD_FAST                0 (n)
              3 LOAD_CONST               1 (2)
              6 COMPARE_OP               0 (&lt;)
              9 POP_JUMP_IF_FALSE       16

  3          12 LOAD_CONST               2 (1)
             15 RETURN_VALUE

  5     &gt;&gt;   16 LOAD_GLOBAL              0 (fib)
             19 LOAD_FAST                0 (n)
             22 LOAD_CONST               2 (1)
             25 BINARY_SUBTRACT
             26 CALL_FUNCTION            1
             29 LOAD_GLOBAL              0 (fib)
             32 LOAD_FAST                0 (n)
             35 LOAD_CONST               1 (2)
             38 BINARY_SUBTRACT
             39 CALL_FUNCTION            1
             42 BINARY_ADD
             43 RETURN_VALUE
             44 LOAD_CONST               0 (None)
             47 RETURN_VALUE
</pre></div></p>
<h4 id="seriously-the-code-is-for-you">Seriously, the code is for <em>you</em>...<a class="headerlink" href="#seriously-the-code-is-for-you" title="Permanent link">&para;</a></h4>
<ul>
<li>...one month from now when you've completely forgotten what the heck <code>alpha</code> was...</li>
<li>...or tomorrow when your teammate wonders why all those <code>3</code>s are in the database....</li>
<li>...or when your system is on fire at 2 AM (the witching hour of production systems), you're tired, and your customers 
are calling wondering what the heck is going on over there (why are they awake, anyway?)...</li>
<li>...or when I'm doing code review for you...</li>
</ul>
<h2 id="there-is-only-one-law-of-good-coding-code-is-for-humans-not-for-computers">There is only one law of good coding: <strong>Code is for humans, not for computers</strong>.<a class="headerlink" href="#there-is-only-one-law-of-good-coding-code-is-for-humans-not-for-computers" title="Permanent link">&para;</a></h2>
<p>This law has 4 consequences: </p>
<ol>
<li><a href="#give-things-informative-names">Give things informative names.</a>  </li>
<li><a href="#document-inputs-and-outputs">Document inputs and outputs.</a>  </li>
<li><a href="#dont-repeat-yourself">Don't repeat yourself.</a>  </li>
<li><a href="#reduce-cognitive-load">Reduce cognitive load: Use PEP-8.</a>  </li>
</ol>
<hr />
<h2 id="give-things-informative-names">Give Things Informative Names<a class="headerlink" href="#give-things-informative-names" title="Permanent link">&para;</a></h2>
<p>What does the function below do?
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>  

<span class="k">def</span> <span class="nf">doit</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>  
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>  
    <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>  
    <span class="k">while</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>  
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>  
            <span class="n">x</span> <span class="o">//=</span> <span class="n">y</span>  
        <span class="k">else</span><span class="p">:</span>  
            <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>  
            <span class="k">continue</span>  
    <span class="k">return</span> <span class="n">output</span>  
</pre></div></p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">magic</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="nb">filter</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y</span> 
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">input</span> 
                    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">20</span> <span class="ow">and</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">filter</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">filter</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pretty_pictures</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;2016.csv.gz&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="s1">&#39;TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span> 
                                           <span class="s1">&#39;MEASUREMENT_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;QUALITY_FLAG&#39;</span><span class="p">,</span> 
                                           <span class="s1">&#39;SOURCE_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;OBS_TIME&#39;</span><span class="p">])</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">weather_df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="s1">&#39;US1ILCK0010&#39;</span><span class="p">]</span>
    <span class="n">first</span><span class="p">[</span><span class="n">first</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="s1">&#39;PRCP&#39;</span><span class="p">][</span><span class="s1">&#39;VALUE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;first_fig.png&#39;</span><span class="p">)</span>

    <span class="n">second</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">weather_df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="s1">&#39;US1ILCK0014&#39;</span><span class="p">]</span>
    <span class="n">second</span><span class="p">[</span><span class="n">second</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="s1">&#39;PRCP&#39;</span><span class="p">][</span><span class="s1">&#39;VALUE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;second_fig.png&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">first</span><span class="p">[</span><span class="n">first</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="s1">&#39;PRCP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">second</span><span class="p">[</span><span class="n">second</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="s1">&#39;PRCP&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>

<ul>
<li>Names should have meaning to the intended readers, e.g.,</li>
<li>You a week from now</li>
<li>Your teammates tomorrow</li>
<li>Your future teammates who have to deal with your code</li>
<li>[<code>i</code>, <code>j</code>, <code>k</code>] for iterators are OK, <code>alpha</code> with a reference to a specific paper is <em>not</em></li>
<li>kwargs are a great place to name things</li>
<li>CONSTANT_VALUES are too</li>
<li>Do not fear long names; you have autocomplete. The TAB key is your friend. </li>
</ul>
<hr />
<h2 id="document-inputs-and-outputs">Document Inputs and Outputs<a class="headerlink" href="#document-inputs-and-outputs" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>  

<span class="k">def</span> <span class="nf">factor</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>  
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>  
    <span class="n">fact</span> <span class="o">=</span> <span class="mi">2</span> 
    <span class="k">while</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>  
        <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="n">fact</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  
            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>  
            <span class="n">x</span> <span class="o">//=</span> <span class="n">fact</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fact</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">continue</span>
    <span class="k">return</span> <span class="n">output</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">unique_flatten</span><span class="p">(</span><span class="n">the_input</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">):</span>
    <span class="n">flattened_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">the_input</span><span class="p">}</span>
    <span class="n">filtered_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">flattened_set</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">max_length</span><span class="p">]</span>
    <span class="n">filtered_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">filtered_list</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">WEATHER_HEADERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="s1">&#39;TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;VALUE&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;MEASUREMENT_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;QUALITY_FLAG&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;SOURCE_FLAG&#39;</span><span class="p">,</span> <span class="s1">&#39;OBS_TIME&#39;</span><span class="p">]</span>

<span class="n">PRECIPITATION_TYPE</span> <span class="o">=</span> <span class="s1">&#39;PRCP&#39;</span>
<span class="n">CHICAGO_STATION_NAMES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;US1ILCK0010&#39;</span><span class="p">,</span> <span class="s1">&#39;US1ILCK0014&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">precipitation_in_chicago</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;2016.csv.gz&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">WEATHER_HEADERS</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">weather_df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="n">CHICAGO_STATION_NAMES</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">first</span><span class="p">[</span><span class="n">first</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="n">PRECIPITATION_TYPE</span><span class="p">][</span><span class="s1">&#39;VALUE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;first_fig.png&#39;</span><span class="p">)</span>

    <span class="n">second</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">weather_df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="n">CHICAGO_STATION_NAMES</span><span class="p">]</span>
    <span class="n">second</span><span class="p">[</span><span class="n">second</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="n">PRECIPITATION_TYPE</span><span class="p">][</span><span class="s1">&#39;VALUE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;second_fig.png&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">first</span><span class="p">[</span><span class="n">first</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="n">PRECIPITATION_TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> 
            <span class="n">second</span><span class="p">[</span><span class="n">second</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="n">PRECIPITATION_TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> 
</pre></div>

<ul>
<li>Every function should have a docstring</li>
<li>The docstring should:</li>
<li>Describe the function briefly</li>
<li>Explicitly document the <em>inputs</em> with <code>:param type name: description</code></li>
<li>Explicitly document the <em>return value</em> with <code>:returns: description</code></li>
<li>Explicitly document the <em>return type</em> with <code>:rtype:</code></li>
<li>Note this follows the <a href="http://thomas-cokelaer.info/tutorials/sphinx/docstring_python.html">Sphinx/RST syntax guide</a>. You can also follow the <a href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt#docstring-standard">Numpy Format</a>. <strong>Just be consistent.</strong></li>
</ul>
<hr />
<h2 id="dont-repeat-yourself">Don't Repeat Yourself<a class="headerlink" href="#dont-repeat-yourself" title="Permanent link">&para;</a></h2>
<h4 id="the-wet-write-everything-twice-way">The WET (Write Everything Twice) Way<a class="headerlink" href="#the-wet-write-everything-twice-way" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">max_intersection</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the value counts of the left and right lists and then return</span>
<span class="sd">    the maximum for each value.</span>

<span class="sd">    :param list[object] left: The left list</span>
<span class="sd">    :param list[object] right: The right list</span>
<span class="sd">    :rtype: dict[object, int]</span>
<span class="sd">    :return: A dictionary from the value to</span>
<span class="sd">        max(# occurrences in left, # occurrences in right)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">left_counts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">left</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">left_counts</span><span class="p">:</span>
            <span class="n">left_counts</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">left_counts</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">right_counts</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">right</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">right_counts</span><span class="p">:</span>
            <span class="n">right_counts</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">right_counts</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">left_counts</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">key</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">left_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">right_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
    <span class="k">return</span> <span class="n">left_counts</span>
</pre></div>
In this case, the value counting logic is redundant and can be abstracted
away into a function. </p>
<h4 id="the-dry-way-use-a-function-to-avoid-redundancy">The DRY Way: Use a function to avoid redundancy<a class="headerlink" href="#the-dry-way-use-a-function-to-avoid-redundancy" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">value_counts</span><span class="p">(</span><span class="n">the_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param list[object] the_list: The list whose values we&#39;ll count</span>
<span class="sd">    :rtype: dict[object, int]</span>
<span class="sd">    :return: A dict from the value to its count</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">the_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output</span><span class="p">[</span><span class="n">val</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">output</span>

<span class="k">def</span> <span class="nf">max_intersection</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the value counts of the left and right lists and then return</span>
<span class="sd">    the maximum for each value.</span>

<span class="sd">    :param list[object] left: The left list</span>
<span class="sd">    :param list[object] right: The right list</span>
<span class="sd">    :rtype: dict[object, int]</span>
<span class="sd">    :return: A dictionary from the value to</span>
<span class="sd">        max(# occurrences in left, # occurrences in right)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">left_counts</span> <span class="o">=</span> <span class="n">value_counts</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
    <span class="n">right_counts</span> <span class="o">=</span> <span class="n">value_counts</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>

    <span class="n">left_counts</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">key</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">left_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">right_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
    <span class="k">return</span> <span class="n">left_counts</span>
</pre></div>

<p>Better... But, there is no need to reinvent the wheel with the <code>value_count</code> function if it has already been implemented for you. </p>
<hr />
<h4 id="the-dry-er-way">The DRY-er Way<a class="headerlink" href="#the-dry-er-way" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><span class="n">from</span> <span class="n">collections</span> <span class="n">import</span> <span class="no">Counter</span>

<span class="k">def</span> <span class="nf">max_intersection</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Compute the value counts of the left and right lists and then return</span>
<span class="s2">    the maximum for each value.</span>

<span class="s2">    :param list[object] left: The left list</span>
<span class="s2">    :param list[object] right: The right list</span>
<span class="s2">    :rtype: dict[object, int]</span>
<span class="s2">    :return: A dictionary from the value to</span>
<span class="s2">        max(# occurrences in left, # occurrences in right)</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="n">left_counts</span> <span class="o">=</span> <span class="no">Counter</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
    <span class="n">right_counts</span> <span class="o">=</span> <span class="no">Counter</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>

    <span class="n">left_counts</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="ss">key</span><span class="p">:</span> <span class="n">max</span><span class="p">(</span><span class="n">left_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">val</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="k">in</span> <span class="n">right_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
    <span class="k">return</span> <span class="n">left_counts</span>
</pre></div>

<p>The Python Standard Library has a <a href="https://docs.python.org/2/library/collections.html#module-collections">collections library</a> that has a Counter object already built. </p>
<h4 id="the-wet-way-plotting">The WET Way: Plotting<a class="headerlink" href="#the-wet-way-plotting" title="Permanent link">&para;</a></h4>
<p>Here is a soggy example of a function that makes plots. Good: Docstring, somewhat informative name. Bad: This function does multiple things, and uses a hard path ('2016.csv.gz').
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">precipitation_in_chicago</span><span class="p">():</span>
    <span class="s2">&quot;&quot;&quot; Saves plots of the precipitation from two Chicago weather stations</span>
<span class="s2">    in 2016 to `first_fig.png` and `second_fig.png` and returns the mean</span>
<span class="s2">    precipitation at them for the year.</span>

<span class="s2">    :return: The mean precipitation at two weather stations in 2016</span>
<span class="s2">    :rtype: (float, float)</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;2016.csv.gz&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="no">WEATHER_HEADERS</span><span class="p">)</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">df</span><span class="o">[</span><span class="n">weather_df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="no">CHICAGO_STATION_NAMES</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span>
    <span class="n">first</span><span class="o">[</span><span class="n">first</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="no">PRECIPITATION_TYPE</span><span class="o">][</span><span class="s1">&#39;VALUE&#39;</span><span class="o">].</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;first_fig.png&#39;</span><span class="p">)</span>

    <span class="n">second</span> <span class="o">=</span> <span class="n">df</span><span class="o">[</span><span class="n">weather_df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="no">CHICAGO_STATION_NAMES</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span>
    <span class="n">second</span><span class="o">[</span><span class="n">second</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="no">PRECIPITATION_TYPE</span><span class="o">][</span><span class="s1">&#39;VALUE&#39;</span><span class="o">].</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;second_fig.png&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">first</span><span class="o">[</span><span class="n">first</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="no">PRECIPITATION_TYPE</span><span class="o">].</span><span class="n">mean</span><span class="p">(),</span> 
            <span class="n">second</span><span class="o">[</span><span class="n">second</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="no">PRECIPITATION_TYPE</span><span class="o">].</span><span class="n">mean</span><span class="p">())</span>
</pre></div></p>
<h4 id="the-dry-way-plotting">The DRY Way: Plotting<a class="headerlink" href="#the-dry-way-plotting" title="Permanent link">&para;</a></h4>
<p>In this example, we've made a helper function. In this example, the function has a better name, doesn't load the dataframe within the function, and has a docstring specifying what the inputs and outputs are as well as their types. </p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">plot_precipitation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">station_id</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s1">&#39;out.png&#39;</span><span class="p">):</span>
    <span class="s2">&quot;&quot;&quot; Plot the precipitation at the passed weather station and return</span>
<span class="s2">    the mean precipitation among all values.</span>

<span class="s2">    :param pd.DataFrame df: NOAA data (see parsers.py for more info)</span>
<span class="s2">    :param str station_id: The station to plot</span>
<span class="s2">    :param str output_file: Where to store the output plot</span>
<span class="s2">    :return: The mean precipitation in the data frame</span>
<span class="s2">    :rtype: float</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="n">res_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">[</span><span class="n">df</span><span class="o">.</span><span class="n">STATION</span> <span class="o">==</span> <span class="n">station_id</span><span class="o">]</span>
    <span class="n">res_df</span><span class="o">[</span><span class="n">res_df</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="no">PRECIPITATION_TYPE</span><span class="o">][</span><span class="s1">&#39;VALUE&#39;</span><span class="o">].</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precipitation values&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">output_file</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">res_df</span><span class="o">[</span><span class="s1">&#39;VALUE&#39;</span><span class="o">].</span><span class="n">mean</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">precipitation_in_chicago</span><span class="p">():</span>
    <span class="s2">&quot;&quot;&quot; Saves plots of the precipitation from two Chicago weather stations</span>
<span class="s2">    in 2016 to `first_fig.png` and `second_fig.png` and returns the mean</span>
<span class="s2">    precipitation at them for the year.</span>

<span class="s2">    :return: The mean precipitation at two weather stations in 2016</span>
<span class="s2">    :rtype: (float, float)</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;2016.csv.gz&#39;</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="no">WEATHER_HEADERS</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">plot_precipitation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="no">CHICAGO_STATION_NAMES</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s1">&#39;first_fig.png&#39;</span><span class="p">),</span>
            <span class="n">plot_precipitation</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="no">CHICAGO_STATION_NAMES</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s1">&#39;second_fig.png&#39;</span><span class="p">))</span>    
</pre></div>

<ul>
<li>Use functions to not repeat yourself</li>
<li>Good rule of thumb: If you've gone <em>20 lines without making a comment</em> (e.g., the docstring of a 
function), you likely should add one.</li>
</ul>
<hr />
<h2 id="reduce-cognitive-load">Reduce Cognitive Load.<a class="headerlink" href="#reduce-cognitive-load" title="Permanent link">&para;</a></h2>
<h3 id="follow-pep-8">Follow PEP-8<a class="headerlink" href="#follow-pep-8" title="Permanent link">&para;</a></h3>
<p>How long does it take you to understand what this function is doing?</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">GCD</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot;Return the GCD of a and b&quot;&quot;&quot;</span>
   <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span><span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
   <span class="k">return</span> <span class="n">b</span> <span class="k">if</span> <span class="n">a</span><span class="o">%</span><span class="n">b</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="n">GCD</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="o">%</span><span class="n">b</span><span class="p">)</span>
</pre></div>

<h4 id="what-makes-this-one-better">What makes this one better?<a class="headerlink" href="#what-makes-this-one-better" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the GCD of a and b</span>

<span class="sd">    :param int a: The first number (positive)</span>
<span class="sd">    :param int b: The second number (positive)</span>
<span class="sd">    :return: The GCD of a and b</span>
<span class="sd">    :rtype: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>

    <span class="k">if</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">gcd</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">%</span><span class="n">b</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">b</span>
</pre></div>

<h4 id="pep-8-is-your-friend">PEP-8 is your friend!<a class="headerlink" href="#pep-8-is-your-friend" title="Permanent link">&para;</a></h4>
<ul>
<li>79 character lines (comes from the days of punchcards)</li>
<li>Use parenthesis for lines that span multiple lines</li>
<li>function_names are snake_case</li>
<li>ClassNames are CamelCase</li>
<li>CONSTANT_NAMES are BIG_CASE</li>
<li>One statement per line</li>
<li>Use spaces not tabs!</li>
</ul>
<h4 id="you-can-use-a-checker-to-pep-8-your-code">You can use a checker to PEP-8 your code.<a class="headerlink" href="#you-can-use-a-checker-to-pep-8-your-code" title="Permanent link">&para;</a></h4>
<h3 id="pip-install-autopep8-autopep8-in-place-mypythonfilepy"><div class="highlight"><pre><span></span>pip install autopep8
autopep8 --in-place mypythonfile.py 
</pre></div><a class="headerlink" href="#pip-install-autopep8-autopep8-in-place-mypythonfilepy" title="Permanent link">&para;</a></h3>
<h2 id="summary-code-is-for-humans-not-computers">Summary: Code is for humans, not computers.<a class="headerlink" href="#summary-code-is-for-humans-not-computers" title="Permanent link">&para;</a></h2>
<ul>
<li>Give things informative names</li>
<li>Document inputs and outputs</li>
<li>Don't repeat yourself (or others!)</li>
<li>PEP-8 is your friend</li>
</ul>
<hr />
<h2 id="exercises">Exercises<a class="headerlink" href="#exercises" title="Permanent link">&para;</a></h2>
<h3 id="fix-this-class">Fix this class!<a class="headerlink" href="#fix-this-class" title="Permanent link">&para;</a></h3>
<h3 id="class-myclassobject-def-__init__self-r-i-selfr-r-selfi-i-def-multiplyself-other-return-myclassselfr-otherr-selfi-otheri-selfr-otheri-selfi-otherr"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="n">myclass</span><span class="p">(</span><span class="n">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">I</span><span class="p">):</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">R</span> <span class="o">=</span> <span class="n">R</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="n">I</span>

    <span class="k">def</span> <span class="nf">Multiply</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">myclass</span><span class="p">(</span><span class="nb">self</span><span class="o">.</span><span class="n">R</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">R</span> <span class="o">-</span> <span class="nb">self</span><span class="o">.</span><span class="n">I</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">I</span><span class="p">,</span>
                       <span class="nb">self</span><span class="o">.</span><span class="n">R</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">I</span> <span class="o">+</span> <span class="nb">self</span><span class="o">.</span><span class="n">I</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">R</span><span class="p">)</span>
</pre></div><a class="headerlink" href="#class-myclassobject-def-__init__self-r-i-selfr-r-selfi-i-def-multiplyself-other-return-myclassselfr-otherr-selfi-otheri-selfr-otheri-selfi-otherr" title="Permanent link">&para;</a></h3>
<h3 id="fix-this-function">Fix this function!<a class="headerlink" href="#fix-this-function" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bang</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="n">bang</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
</pre></div>

<h3 id="fix-this-function_1">Fix this function!<a class="headerlink" href="#fix-this-function_1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">read_data</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="s2">&quot;&quot;&quot; Return the precipitation field from the csv passed in &quot;&quot;&quot;</span>
    <span class="n">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="n">as</span> <span class="ss">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">f</span><span class="o">]</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/dssg/hitchhikers-guide" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/datascifellows" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/company/center-for-data-science-and-public-policy-university-of-chicago" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
        <script src="../../../js/mermaid.min.js"></script>
      
    
  </body>
</html>